<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Tourism in Malaysia</title>
    <link rel="stylesheet" href="styles.css">

    <!-- Vega, Vega-Lite, and Vega-Embed -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5.22.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.5.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.21.0"></script>
</head>
<body>
    <header>
        <h1>Tourism in Malaysia</h1>
    </header>
    
    <section class="description">
        <p>
            <strong>Malaysia</strong> is a Southeast Asian country known for its <strong>beautiful beaches</strong>, <strong>rainforests</strong>, and a mix of <strong>Malay, Chinese, Indian,</strong> and <strong>European cultural influences</strong>. 
            Tourism in Malaysia is driven by both its <strong>natural wonders</strong> and <strong>vibrant cities</strong>, such as <strong>Kuala Lumpur</strong>. 
            Key attractions include the <strong>UNESCO World Heritage sites</strong> of <strong>George Town, Penang</strong>, and the stunning islands of <strong>Langkawi</strong> and <strong>Borneo</strong>.
        </p>        
    </section>

    <section class="images">
        <img src="https://raw.githubusercontent.com/JunaidLimalia/3179_A2/main/images/petronas.jpeg" alt="Petronas Towers in Kuala Lumpur" width="300">
        <img src="https://raw.githubusercontent.com/JunaidLimalia/3179_A2/main/images/langkawi.jpeg" alt="Langkawi Island Cable Car" width="300">
        <img src="https://raw.githubusercontent.com/JunaidLimalia/3179_A2/main/images/kinabula.jpeg" alt="Kinabalu National Park in Sabah" width="300">
    </section>


      <!-- World map container -->
    <section class="map-title">
        <h2>Global Tourist Arrivals to Malaysia</h2>
    </section>

    <section id="map"></section>

    <section class="map-description">
        <p>
            The map above showcases the <strong>global distribution of tourist arrivals</strong> to Malaysia. The data reflects Malaysia’s position as a <strong>key travel destination</strong>, attracting visitors from <strong>neighboring Asian countries</strong>, as well as from <strong>Europe, North America,</strong> and <strong>Australia</strong>. 
            Malaysia’s <strong>rich cultural diversity</strong>, <strong>natural beauty</strong>, and <strong>modern infrastructure</strong> make it a popular destination for tourists worldwide.
        </p>        
    </section>
    

    <!-- Script for embedding the world map -->
    <script>
      const spec = {
        "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
        "width": 1000,
        "height": 400,
        "background": "#f5f5dc",
        "padding": {"left": 0, "top": 0, "right": 0, "bottom": 0},
        "projection": {"type": "equalEarth"},
        "layer": [
            {
            "data": {
                "url": "https://raw.githubusercontent.com/FIT3179/Vega-Lite/main/3_choropleth_map/js/ne_110m_admin_0_countries.topojson",
                "format": {"type": "topojson", "feature": "ne_110m_admin_0_countries"}
            },
            "mark": {"type": "geoshape", "fill": "lightgray", "stroke": "white"},
            "transform": [
                {
                "calculate": "'Data is not available in ' + datum.properties.NAME",
                "as": "note"
                }
            ],
            "encoding": {"tooltip": {"field": "note"}}
            },
            {
            "data": {
                "url": "https://raw.githubusercontent.com/FIT3179/Vega-Lite/main/7_others/oceans.topojson",
                "format": {"type": "topojson", "feature": "oceans"}
            },
            "mark": {"type": "geoshape", "fill": "#3a71a0"}
            },
            {
            "data": {
                "url": "https://raw.githubusercontent.com/FIT3179/Vega-Lite/main/2_symbol_map/js/WorldMapWithGraticules.topojson",
                "format": {"type": "topojson", "feature": "ne_110m_graticules_30"}
            },
            "mark": {"type": "geoshape", "fill": null, "stroke": "lightgray"}
            },
            {
            "data": {
                "url": "https://raw.githubusercontent.com/FIT3179/Vega-Lite/main/3_choropleth_map/js/ne_110m_admin_0_countries.topojson",
                "format": {"type": "topojson", "feature": "ne_110m_admin_0_countries"}
            },
            "transform": [
                {
                "lookup": "properties.NAME",
                "from": {
                    "data": {
                    "url": "https://raw.githubusercontent.com/JunaidLimalia/3179_A2/main/data/tourist_arrivals_by_country.csv"
                    },
                    "key": "Country",
                    "fields": ["Tourist_Arrivals"]
                }
                }
            ],
            "mark": {"type": "geoshape", "stroke": "white"},
            "encoding": {
                "color": {
                "field": "Tourist_Arrivals",
                "type": "quantitative",
                "scale": {
                    "type": "threshold",
                    "domain": [10000, 100000, 500000, 1000000, 5000000, 10000000],
                    "scheme": "yelloworangered"
                },
                "legend": {
                    "title": "Number of Tourists"
                }
                },
                "tooltip": [
                {"field": "properties.NAME", "type": "nominal", "title": "Country"},
                {
                    "field": "Tourist_Arrivals",
                    "type": "quantitative",
                    "title": "Number of Tourists",
                    "format": ","
                }
                ]
            }
            }
        ]
        };

      vegaEmbed('#map', spec).then(function(result) {
        console.log("Map rendered successfully");
      }).catch(console.error);
    </script>


    <!-- Malaysia map container -->
    <section class="map-title">
        <h2>Tourist Destination in Malaysia</h2>
    </section>

    <section class="map-container">
        <div id="malaysia-map"></div>
        <div class="map-description-right">
            <p>
                The map shows the <strong>number of tourist arrivals</strong> across <strong>different Malaysian states in 2023</strong>. The <strong>darker red areas</strong> indicate <strong>higher numbers of tourists</strong>, with 
                <strong>Selangor</strong> and <strong>Sabah</strong> being the <strong>top destinations</strong>. These states attract a significant number of both <strong>local</strong> and <strong>international visitors</strong>.
            </p> 
        </div>
    </section>

    <!-- Script for embedding the Malaysia map -->
    <script>
        const spec1 = {
            "$schema": "https://vega.github.io/schema/vega/v5.json",
            "background": "#f5f5dc",
            "padding": 5,
            "width": 800,
            "height": 450,
            "style": "view",
            "data": [
            {
                "name": "source_1",
                "url": "https://raw.githubusercontent.com/JunaidLimalia/3179_A2/main/data/tourist-arrivals-by-states-malaysia-2023.csv",
                "format": {"type": "csv", "delimiter": ","}
            },
            {
                "name": "source_0",
                "url": "https://raw.githubusercontent.com/nullifye/malaysia.geojson/master/malaysia.state.geojson",
                "format": {"type": "json", "property": "features", "parse": {}},
                "transform": [
                {
                    "type": "formula",
                    "expr": "datum[\"properties\"] && datum[\"properties\"][\"name\"]",
                    "as": "properties.name"
                },
                {
                    "type": "lookup",
                    "from": "source_1",
                    "key": "State",
                    "fields": ["properties.name"],
                    "values": ["Tourist_Arrivals"]
                },
                {
                    "type": "filter",
                    "expr": "isValid(datum[\"Tourist_Arrivals\"]) && isFinite(+datum[\"Tourist_Arrivals\"])"
                }
                ]
            }
            ],
            "projections": [
            {
                "name": "projection",
                "size": {"signal": "[width, height]"},
                "fit": {"signal": "data('source_0')"},
                "type": "mercator"
            }
            ],
            "marks": [
            {
                "name": "marks",
                "type": "shape",
                "style": ["geoshape"],
                "from": {"data": "source_0"},
                "encode": {
                "update": {
                    "stroke": {"value": "white"},
                    "strokeWidth": {"value": 1},
                    "fill": {"scale": "color", "field": "Tourist_Arrivals"},
                    "tooltip": {
                    "signal": "{\"State\": isValid(datum[\"properties.name\"]) ? datum[\"properties.name\"] : \"\"+datum[\"properties.name\"], \"Tourist Arrivals\": format(datum[\"Tourist_Arrivals\"], \"\")}"
                    },
                    "ariaRoleDescription": {"value": "geoshape"},
                    "description": {
                    "signal": "\"Tourist_Arrivals: \" + (format(datum[\"Tourist_Arrivals\"], \"\")) + \"; State: \" + (isValid(datum[\"properties.name\"]) ? datum[\"properties.name\"] : \"\"+datum[\"properties.name\"]) + \"; Tourist Arrivals: \" + (format(datum[\"Tourist_Arrivals\"], \"\"))"
                    }
                }
                },
                "transform": [{"type": "geoshape", "projection": "projection"}]
            }
            ],
            "scales": [
            {
                "name": "color",
                "type": "linear",
                "domain": {"data": "source_0", "field": "Tourist_Arrivals"},
                "range": {"scheme": "yelloworangered"},
                "interpolate": "hcl",
                "zero": false
            }
            ],
            "legends": [
            {
                "title": "Number of Tourists",
                "fill": "color",
                "gradientLength": {"signal": "clamp(height, 64, 200)"}
            }
            ]
            };
        vegaEmbed('#malaysia-map', spec1).then(result => {
            console.log("Malaysia map rendered successfully");
        }).catch(console.error);
    </script>

    <!-- Line Chart container -->
    <section class="Linechart-title">
        <h2>Tourist Arrivals over the Years</h2>
    </section>

    <section class="linechart">
        <div id="tourist-linechart"></div>
    </section>

    <!-- Line Chart Description -->
    <section class="linechart-description">
        <p>
            The line chart above shows the trend of <strong>international tourist arrivals</strong> to Malaysia from <strong>1980 to 2020</strong>. 
            A <strong>significant drop in tourist arrivals</strong> is observed in <strong>2020</strong> due to the global <strong>COVID-19 pandemic</strong>, 
            which affected travel worldwide.
        </p>        
    </section>

    <script>
        const lineChartSpec = {
        "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
        "width": 800,
        "height": 400,
        "background": "#f5f5dc",
        "data": {
            "url": "https://raw.githubusercontent.com/JunaidLimalia/3179_A2/main/data/1980-2020-international-tourist-arrivals-to-malaysia.csv",
            "format": {"type": "csv"}
        },
        "transform": [
            {
            "calculate": "parseFloat(replace(datum['TOURIST ARRIVAL INTERNATIONAL'], ',', ''))",
            "as": "Tourist_Arrivals"
            }
        ],
        "layer": [
            {
            "mark": {
                "type": "area",
                "line": {"color": "red"},
                "color": {
                "x1": 1,
                "y1": 1,
                "x2": 1,
                "y2": 0,
                "gradient": "linear",
                "stops": [
                    {"offset": 0, "color": "white"},
                    {"offset": 1, "color": "red"}
                ]
                },
                "tooltip": true
            },
            "encoding": {
                "x": {
                "field": "YEAR",
                "type": "ordinal",
                "axis": {
                    "labelAngle": -45,
                    "title": "Year",
                    "labelColor": "black",
                    "titleColor": "black",
                    "tickColor": "black",
                    "domainColor": "black",
                    "domainWidth": 1.5,
                    "tickSize": 5
                }
                },
                "y": {
                "field": "Tourist_Arrivals",
                "type": "quantitative",
                "axis": {
                    "title": "Tourist Arrivals ('000)",
                    "labelColor": "black",
                    "titleColor": "black",
                    "tickColor": "black",
                    "domainColor": "black",
                    "domainWidth": 1.5,
                    "tickSize": 5
                }
                },
                "tooltip": [
                {"field": "YEAR", "type": "ordinal", "title": "Year"},
                {
                    "field": "Tourist_Arrivals",
                    "type": "quantitative",
                    "title": "International Tourist Arrivals",
                    "format": ","
                }
                ]
            }
            },
            {
            "mark": {
                "type": "text",
                "align": "left",
                "dx": 5,
                "dy": -5,
                "color": "black",
                "fontWeight": "bold"
            }
            }
        ],
        "config": {
            "axis": {
            "labelFontSize": 12,
            "titleFontSize": 14,
            "grid": false,
            "domain": false
            },
            "view": {
            "stroke": "none"
            },
            "area": {
            "line": true,
            "strokeWidth": 1.5
            }
        }
        };

        vegaEmbed('#tourist-linechart', lineChartSpec).then(function(result) {
            console.log("Line chart rendered successfully");
        }).catch(console.error);
    </script>

    <!-- Mode of Arrival Header -->
    <section class="mode-arrival-title">
        <h2>Mode of Arrival</h2>
    </section>

    <!-- Chart and Description Container -->
    <section class="mode-arrival-container">
        <!-- Placeholder for Mode of Arrival Chart -->
        <div id="arrival-chart"></div>

        <!-- Description Section -->
        <div class="mode-arrival-description">
            <p>
                The donut chart illustrates the distribution of tourist arrivals in Malaysia via different modes of transportation for the selected period. 
                <strong>Land transport</strong> accounts for the largest share, followed by <strong>air</strong> and <strong>sea</strong> transport. Rail transport has the smallest contribution.
            </p>
        </div>
    </section>

    <script>
        const donutChartSpec = {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "width": 400,
            "height": 400,
            "background": "#f5f5dc",
            "data": {
                "url": "https://raw.githubusercontent.com/JunaidLimalia/3179_A2/main/data/mode-of-arrival.csv",
                "format": {"type": "csv"}
            },
            "transform": [
                {
                    "calculate": "replace(datum['TOTAL'] || '', /,/g, '')",
                    "as": "CleanTotal"
                },
                {
                    "calculate": "parseFloat(datum['CleanTotal'])",
                    "as": "TotalArrivals"
                }
            ],
            "mark": {
                "type": "arc",
                "innerRadius": 80,
                "tooltip": true
            },
            "encoding": {
                "theta": {
                    "field": "TotalArrivals",
                    "type": "quantitative",
                    "stack": true
                },
                "color": {
                    "field": "MODE",
                    "type": "nominal",
                    "legend": {"title": "Mode of Arrival"}
                },
                "tooltip": [
                    {"field": "MODE", "type": "nominal", "title": "Mode"},
                    {
                        "field": "TotalArrivals",
                        "type": "quantitative",
                        "title": "Arrivals",
                        "format": ","
                    }
                ]
            },
            "config": {
                "view": {"stroke": "none"},
                "arc": {"cornerRadius": 5, "stroke": "#fff", "strokeWidth": 1.5}
            }
        };

        vegaEmbed('#arrival-chart', donutChartSpec)
            .then(function(result) {
                console.log("Donut chart rendered successfully");
            })
            .catch(console.error);
    </script>

    <!-- Designer Info Header -->
    <header class="designer-info">
        <p><strong>Designed by Mohammad Junaid Limalia</strong></p>
        <p>
            <strong>Data source:</strong> 
            <a href="https://archive.data.gov.my/data/dataset/?tags=tourism+malaysia" target="_blank">
                Malaysia Open Data Portal
            </a>
        </p>
    </header>

    <!-- Blank Footer -->
    <footer class="footer"></footer>

</body>
</html>